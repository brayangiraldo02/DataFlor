<app-nav></app-nav>
<div class="container">
  <h2>Lista de usuarios</h2>
  <button routerLink="/user/create">Agregar usuario</button>
  <table class="table">
    <thead>
      <tr>
        <th>ID</th>
        <th>Usuario</th>
        <th>Nombre</th>
        <th>Teléfono</th>
        <th>Rol</th>
        <th>ID floristería</th>
        <th>¿Está activo?</th>
        <th>Acción</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let user of users">
        <td>{{ user.userid }}</td>
        <td>{{ user.username }}</td>
        <td>{{ user.fullname }}</td>
        <td>{{ user.phone }}</td>
        <td>{{ user.role }}</td>
        <td>{{ user.idflowershops }}</td>
        <td>{{ user.state }}</td>
        <td>
          <button (click)="editUser(user)">Editar</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<div *ngIf="editingUser">
  <h3>Editar Usuario</h3>
  <form (ngSubmit)="updateUser()" #userForm="ngForm">
    <div class="form-group">
      <label for="username">Usuario:</label>
      <input id="username" type="text" name="username" [(ngModel)]="editingUser.username" required>
    </div>

    <div class="form-group">
      <label for="phone">Teléfono:</label>
      <input id="phone" type="text" name="phone" [(ngModel)]="editingUser.phone" required>
    </div>

    <div class="state">
      <label for="state">Estado:</label>
      <select id="state" name="state" [(ngModel)]="editingUser.state" required>
        <option class="option" value="Activate">Activo</option>
        <option class="option" value="Inactive">Inactivo</option>
      </select>
    </div>

    <button type="submit">Guardar cambios</button>
    <button (click)="cancelEdit()">Cancelar</button>
  </form>
</div>
